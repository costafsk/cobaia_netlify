{"version":3,"sources":["spotify.js"],"names":["console","log","CLIENT_ID","SCOPE","RESPONSE_TYPE","REDIRECT_URI","URL","document","querySelector","addEventListener","e","location","sessionStorage","BEARER","HEADERS","Headers","OPTIONS","headers","ENDPOINT","then","response","json","dir","textContent","display_name","form","preventDefault","artista","value","Error","img","images","url","src"],"mappings":";AACAA,QAAQC,IAAI,iBACZ,IAAMC,EAAY,mCACZC,EAAQ,sCACRC,EAAgB,QAChBC,EAAe,kCACfC,EAA0DJ,oDAAAA,EAA0BG,iBAAAA,EAAsBF,UAAAA,EAAuBC,kBAAAA,EAMvI,GAJAG,SAASC,cAAc,gBAAgBC,iBAAiB,QAAS,SAASC,GAC/DC,OAAAA,SAAWL,IAGlBM,eAAA,MAAyB,CACnBC,IAAAA,EAASD,eAAA,MACTE,EAAU,IAAIC,QAAQ,CACGF,cAAAA,UAAAA,IAEzBG,EAAU,CAACC,QAASH,GACpBI,EAAW,gCACXA,MAAAA,EAAUF,GAASG,KAAK,SAASC,GAC5BA,OAAAA,EAASC,SACjBF,KAAK,SAASE,GACLC,QAAAA,IAAID,GACHb,SAAAA,cAAc,eAAee,YAAcF,EAAKG,eAIjE,IAAMC,EAAOlB,SAASC,cAAc,QAEpCiB,EAAKhB,iBAAiB,SAAU,SAASC,GACnCgB,EAAAA,iBACIC,IAAAA,EAAUF,EAAKE,QAAQC,MACrB3B,QAAAA,IAAI0B,GACNd,IAAAA,EAASD,eAAA,MACV,IAAEC,EAAQ,MAAM,IAAIgB,MAAM,mBACzBf,IAAAA,EAAU,IAAIC,QAAQ,CACGF,cAAAA,UAAAA,IAIzBK,MADiDS,sCAAAA,EADvC,CAACV,QAASH,IAEDK,KAAK,SAASC,GAC5BA,OAAAA,EAASC,SACjBF,KAAK,SAASE,GACPS,IAAAA,EAAMT,EAAKU,OAAO,GAAGC,IAClBxB,SAAAA,cAAc,OAAOyB,IAAMH","file":"spotify.ba31c4d7.map","sourceRoot":"..","sourcesContent":["// spotify.js\nconsole.log('spotify.js OK');\nconst CLIENT_ID = '937353f06aef460ba7f081e75d4dd0bf';\nconst SCOPE = 'user-read-private%20user-read-email';\nconst RESPONSE_TYPE = 'token';\nconst REDIRECT_URI = 'http://localhost:8080/callback/';\nconst URL = `https://accounts.spotify.com/authorize?client_id=${CLIENT_ID}&redirect_uri=${REDIRECT_URI}&scope=${SCOPE}&response_type=${RESPONSE_TYPE}`;\n\ndocument.querySelector('button#login').addEventListener('click', function(e) {\n    window.location = URL;\n});\n\nif (sessionStorage['token']) {\n    const BEARER = sessionStorage['token'];\n    const HEADERS = new Headers({\n        'Authorization': `Bearer ${BEARER}`\n    });\n    const OPTIONS = {headers: HEADERS};\n    const ENDPOINT = 'https://api.spotify.com/v1/me';\n    fetch(ENDPOINT, OPTIONS).then(function(response) {\n        return response.json();\n    }).then(function(json) {\n        console.dir(json);\n        document.querySelector('div#usuario').textContent = json.display_name;\n    });\n}\n\nconst form = document.querySelector('form');\n\nform.addEventListener('submit', function(e) {\n    e.preventDefault();\n    const artista = form.artista.value;\n    console.log(artista);\n    const BEARER = sessionStorage['token'];\n    if ( ! BEARER) throw new Error('não está logado');\n    const HEADERS = new Headers({\n        'Authorization': `Bearer ${BEARER}`\n    });\n    const OPTIONS = {headers: HEADERS};\n    const ENDPOINT = `https://api.spotify.com/v1/artists/${artista}`;\n    fetch(ENDPOINT, OPTIONS).then(function(response) {\n        return response.json();\n    }).then(function(json) {\n        const img = json.images[2].url;\n        document.querySelector('img').src = img;\n    });\n});\n"]}